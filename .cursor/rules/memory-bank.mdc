.cursor/rules â€” Memory Bank via MCP for clickupâ€‘mcpâ€‘server (EN)

Purpose: Run with persistent context and orchestrate ClickUp tasks and docs via MCP. Golden rule for docs: always create the document first and then update its pages/content (create_document â†’ create_document_page/update_document_page).

â¸»

ğŸ”‘ Trigger Commands
	â€¢	follow your custom instructions â†’ Run Preâ€‘flight validation (a) and then the memory access pattern. Choose Planning (b) or Execution (c) mode.
	â€¢	initialize memory bank â†’ Preâ€‘flight, create the local base structure (projectbrief.md, productContext.md, systemPatterns.md, techContext.md, activeContext.md, progress.md) and verify MCP connectivity.
	â€¢	update memory bank â†’ Reâ€‘read all context; update docs when scope change â‰¥25%, when new patterns appear, or on user request. Always mirror ClickUp IDs in progress.md.

â¸»

ğŸ§© Tools (from the official ClickUp MCP Server)

All tools accept/return JSON. Nameâ€‘based lookup is supported almost everywhere (e.g., listName instead of listId). Dates are Unix ms or natural language (see below). Priorities are 1=Urgent â€¦ 4=Low. Custom Task IDs are supported in taskId.

Task Management (core)
	â€¢	get_tasks â€“ Retrieve tasks from a list. Required: listId or listName. Optional: archived, page, order_by, reverse, subtasks, statuses, include_closed, assignees, due_date_gt/lt.
	â€¢	get_task â€“ Get a single task with global lookup. Required: taskId or taskName. Optional: listName (for disambiguation), subtasks.
	â€¢	get_task_comments â€“ Fetch comments. Required: taskId or taskName. Optional: listName, start, startId.
	â€¢	create_task_comment â€“ Add a comment. Required: commentText and (taskId or taskName+listName). Optional: notifyAll, assignee.
	â€¢	attach_task_file â€“ Attach a file. Required: taskId or taskName, and either file_data (base64) or file_url (URL or local path). Optional: file_name, chunk params for large files.
	â€¢	create_task â€“ Create a task. Required: name and (listId or listName). Optional: description, status, priority (1â€‘4), dueDate, startDate, parent, assignees, tags.
	â€¢	create_bulk_tasks â€“ Create many at once. Required: tasks[]. Optional: listId/listName.
	â€¢	update_task â€“ Modify a task. Required: taskId or taskName. Optional: name, description, status, priority, dueDate, startDate, etc.
	â€¢	update_bulk_tasks â€“ Modify many. Required: tasks[] with identifiers.
	â€¢	delete_task â€“ Delete one. Required: taskId (name/list optional).
	â€¢	delete_bulk_tasks â€“ Delete many. Required: tasks[] with identifiers.
	â€¢	move_task â€“ Move one to another list. Required: (taskId or taskName) and (listId or listName). Optional: sourceListName.
	â€¢	move_bulk_tasks â€“ Move many. Required: tasks[] + target list.
	â€¢	duplicate_task â€“ Copy to another list. Required: (taskId or taskName) and target list id/name. Optional: sourceListName.
	â€¢	get_workspace_tasks â€“ Query tasks across the workspace with filters. Required: at least one filter (tags, list_ids, folder_ids, space_ids, statuses, assignees, date filters). Optional: page, order_by, reverse, detail_level (summary|detailed), subtasks.

Naturalâ€‘language dates: use strings like "tomorrow at 9am", "end of week", "start of today", "next Monday 8am". Server converts to timestamps.

Custom task IDs: taskId accepts ClickUp IDs or custom IDs (e.g., DEV-1234). Workspace must have custom IDs enabled.

List Management
	â€¢	create_list â€“ Required: name and (spaceId or spaceName). Optional: content, dueDate, priority, assignee.
	â€¢	create_list_in_folder â€“ Required: name and (folderId or folderName). Optional: content, status.
	â€¢	get_list â€“ Required: listId or listName.
	â€¢	update_list â€“ Required: listId or listName. Optional: name, content, status.
	â€¢	delete_list â€“ Required: listId or listName.

Folder Management
	â€¢	create_folder â€“ Required: name and (spaceId or spaceName). Optional: override_statuses.
	â€¢	get_folder â€“ Required: folderId or folderName (with spaceId/spaceName if needed).
	â€¢	update_folder â€“ Required: folderId or folderName. Optional: name, override_statuses, and optionally spaceId/spaceName.
	â€¢	delete_folder â€“ Required: folderId or folderName (with space context if needed).

Tag Management
	â€¢	get_space_tags â€“ Required: spaceId or spaceName.
	â€¢	create_space_tag â€“ Required: tagName and spaceId/spaceName. Optional: tagBg (hex), tagFg (hex), colorCommand (natural language: â€œdark blueâ€, â€œlight greenâ€).
	â€¢	update_space_tag â€“ Required: tagName and spaceId/spaceName. Optional: newTagName, tagBg, tagFg, colorCommand.
	â€¢	delete_space_tag â€“ Required: tagName and spaceId/spaceName.
	â€¢	add_tag_to_task / remove_tag_from_task â€“ Required: tagName and (taskId or taskName+listName).

Notes: tag names are caseâ€‘sensitive; ensure tag exists before adding (use get_space_tags / create_space_tag).

Document Management (ClickUp Docs)
	â€¢	create_document â€“ Required: name, parent { id, type }, visibility, create_page (boolean).
	â€¢	get_document â€“ Required: documentId.
	â€¢	list_documents â€“ No required params. Optional: id, creator, deleted, archived, parent_id, parent_type, limit, next_cursor.
	â€¢	list_document_pages â€“ Required: documentId. Optional: max_page_depth (-1 for unlimited).
	â€¢	get_document_pages â€“ Required: documentId, pageIds[]. Optional: content_format (text/md or text/html).
	â€¢	create_document_page â€“ Required: documentId, name. Optional: content, sub_title, parent_page_id.
	â€¢	update_document_page â€“ Required: documentId, pageId. Optional: name, sub_title, content, content_format (text/plain), content_edit_mode (replace|append|prepend).

Doc flow (MANDATORY):
	1.	Create the document with create_document (optionally with create_page: true).
	2.	Then add/modify content using create_document_page (for new pages) and/or update_document_page (to replace/append/prepend). Never assume page IDsâ€”fetch via list_document_pages or capture from responses.

Workspace Organization
	â€¢	get_workspace_hierarchy â€“ Returns full tree (spaces, folders, lists). Use it to validate names/IDs before acting.

Member Management
	â€¢	get_workspace_members â€“ List all members.
	â€¢	find_member_by_name â€“ Find a member by name/email.
	â€¢	resolve_assignees â€“ Convert names/emails to user IDs. You can pass mixed formats in task assignees.

Error Handling & Rate Limiting
	â€¢	The server returns structured errors for missing params, not found, permission, and rate limiting. It retries with backoff when rateâ€‘limited. Handle type fields like MISSING_PARAMETER, NOT_FOUND.

â¸»

(a) ğŸ›« Preâ€‘flight Validation
	1.	Local structure present: read, in order â†’ projectbrief.md â†’ productContext.md â†’ systemPatterns.md â†’ techContext.md â†’ activeContext.md â†’ progress.md â†’ features/*.md / api/*.md / deployment/*.md (if any).
	2.	Environment: ensure CLICKUP_TOKEN and MCP transport. For web clients, optionally enable SSE (ENABLE_SSE, SSE_PORT).
	3.	Connectivity: fetch workspace tree (get_workspace_hierarchy) and team members (get_workspace_members) to prime name/ID resolution.
	4.	Sanity checks: resolve lists/folders/spaces by name or ID; when ambiguous, prefer IDs or disambiguate with parent context.

â¸»

(b) ğŸ“‹ Planning Mode

Inputs: full memory read + get_workspace_hierarchy + inventory of existing tasks/docs (get_workspace_tasks with filters; list_documents).

Output: structured plan recorded in activeContext.md stating what tasks/docs will be created/updated, why, and where (space/folder/list or doc parent). Include chosen status, priority, tags, assignees, and relationships.

Steps
	1.	Gap analysis vs. projectbrief.md.
	2.	Choose valid statuses/priorities (ClickUp defaults are fine if unspecified).
	3.	Decide between create vs update for tasks and docs.
	4.	Document decisions, target containers (space/folder/list), and any dependencies.

â¸»

(c) âš™ï¸ Execution Mode (tool call patterns)

âœ… Tasks
	â€¢	Create:

{
  "tool": "create_task",
  "args": {"listName": "Development Tasks", "name": "Implement Authentication", "priority": 1, "dueDate": 1703980800000,
    "markdown_description": "## Requirements\n- OAuth2\n- JWT\n- Refresh tokens"}
}

	â€¢	Update status/date:

{"tool":"update_task","args": {"taskName":"Database Migration","startDate":"next Monday at 8am"}}

	â€¢	Workspace query (summaries first):

{"tool":"get_workspace_tasks","args": {"tags":["bug"], "detail_level":"summary", "page":0}}

	â€¢	Move/duplicate: supply destination listId/listName; include sourceListName if disambiguation is needed.
	â€¢	Comments/files: use create_task_comment and attach_task_file (either file_data base64 or file_url).

ğŸ—‚ï¸ Lists & Folders
	â€¢	Create list in space:

{"tool":"create_list","args": {"spaceName":"Development","name":"Sprint Backlog"}}

	â€¢	Create list in folder:

{"tool":"create_list_in_folder","args": {"folderName":"Project X","name":"Backend Tasks"}}

	â€¢	Create folder in space:

{"tool":"create_folder","args": {"spaceName":"Development","name":"Active Projects"}}

ğŸ·ï¸ Tags
	â€¢	Ensure tag exists â†’ add to task:

{"tool":"create_space_tag","args": {"spaceName":"Development","tagName":"important","colorCommand":"dark blue"}}

{"tool":"add_tag_to_task","args": {"taskName":"Implement Authentication","listName":"Development Tasks","tagName":"important"}}

ğŸ“„ Documents (create â†’ then update)
	â€¢	Create document (with initial page):

{"tool":"create_document","args": {"name":"Technical Documentation",
  "parent": {"id":"123456","type":4}, "visibility":"PUBLIC", "create_page": true}}

	â€¢	Find the page ID:

{"tool":"list_document_pages","args": {"documentId":"8cdu22c-13153", "max_page_depth": 1}}

	â€¢	Update the page content (append):

{"tool":"update_document_page","args": {"documentId":"8cdu22c-13153","pageId":"8cdu22c-36253",
  "content":"# Getting Started\nPrereqs...\n","content_format":"text/plain","content_edit_mode":"append"}}

	â€¢	Or create a named page then update:

{"tool":"create_document_page","args": {"documentId":"8cdu22c-13153","name":"Integration Guide","content":"Intro"}}

{"tool":"update_document_page","args": {"documentId":"8cdu22c-13153","pageId":"<returnedId>","content":"Full guide...","content_format":"text/plain","content_edit_mode":"replace"}}

ğŸ‘¥ Members
	â€¢	Resolve assignees:

{"tool":"resolve_assignees","args": {"assignees":["jdoe@example.com","Jane Smith",123]}}

Use the resulting user IDs (or pass mixed identifiers directly in assignees).

â¸»

(d) ğŸ“š Documentation Updates (when to write back)
	â€¢	Scope change â‰¥25% (multiple tasks/docs, roadmap shift), new pattern discovered, explicit update memory bank, or ambiguity between plan and actual workspace state.
	â€¢	Order: reâ€‘read all â†’ update progress.md (source of truth with IDs/timestamps) â†’ update activeContext.md (decisions/impact) â†’ adjust context files (projectbrief.md, productContext.md, systemPatterns.md, techContext.md) if needed.

progress.md entry template

## 2025â€‘09â€‘29
- create_document â†’ **Technical Documentation** | id=`8cdu22c-13153` | parent.type=4
- update_document_page â†’ doc=`8cdu22c-13153` page=`8cdu22c-36253` | content=v1 appended
- create_task â†’ "Implement Authentication" | id=`123abc` | list="Development Tasks" | priority=1 | due=2024â€‘01â€‘01


â¸»

(e) ğŸ§  Project Intelligence (.cursor/rules evolves)
	â€¢	Record patterns (default priorities/status by task type; tag conventions; doc naming: {Project}: {Subject}; page organization).
	â€¢	Track task relationships (subtasks via parent, blockers/duplicates if modeled in your flow).
	â€¢	Capture user preferences (spaces/folders/lists for each project, default visibility for docs).
	â€¢	Periodically validate with the user and apply automatically.

â¸»

(f) ğŸ—‚ï¸ Memory Bank Structure (local)

flowchart TD
    PB[projectbrief.md] --> PC[productContext.md]
    PB --> SP[systemPatterns.md]
    PB --> TC[techContext.md]
    PC --> AC[activeContext.md]
    SP --> AC
    TC --> AC
    AC --> P[progress.md]
    subgraph CF[Custom]
        CF1[features/*.md]
        CF2[api/*.md]
        CF3[deployment/*.md]
    end
    AC -.-> CF
    CF -.-> P

    style PB fill:#e066ff,stroke:#333,stroke-width:2px
    style AC fill:#4d94ff,stroke:#333,stroke-width:2px
    style P fill:#2eb82e,stroke:#333,stroke-width:2px

Read before acting: top â†’ down. Write back: reverse order (first progress.md). Always consult .cursor/rules while executing.

â¸»

âœ… Quick Checklist
	1.	Preâ€‘flight: local files âœ”, CLICKUP_TOKEN âœ”, transport âœ”, hierarchy/members fetched âœ”.
	2.	Inventory: get_workspace_tasks (filtered) + list_documents.
	3.	Plan in activeContext.md (what/why/where).
	4.	Execute:
	â€¢	Docs: create_document â†’ list_document_pages/create_document_page â†’ update_document_page.
	â€¢	Tasks: create_task/update_task/move_task/create_task_comment/attach_task_file.
	â€¢	Lists/Folders/Tags: create/update as needed.
	5.	Record: progress.md with real IDs and timestamps; reference in activeContext.md.
	6.	Learn: update .cursor/rules with new patterns.