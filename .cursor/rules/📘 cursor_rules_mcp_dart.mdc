---
alwaysApply: true
---

# Memory Bank via MCP para Dart

üéØ **Objetivo geral**

Como engenheiro especialista cuja mem√≥ria se reinicia entre sess√µes, devo confiar **inteiramente** no *Memory¬†Bank* para recuperar contexto. Agora, em vez de utilizar apenas arquivos locais, o fluxo inclui a√ß√µes atrav√©s do servidor **MCP¬†Dart** para gerenciar tarefas e documentos. Antes de iniciar qualquer tarefa, devo ler **todos** os arquivos da mem√≥ria seguindo a hierarquia e validar que consigo comunicar‚Äëme com o MCP (por exemplo, chamando `get_config`). Os comandos a seguir controlam o ciclo de vida deste banco de mem√≥ria e as opera√ß√µes com Dart.

## Comandos‚Äëchave

- üß≠ **follow your custom instructions**  
  Inicia a *Valida√ß√£o pr√©‚Äëvoo* e, em seguida, segue o *padr√£o de acesso √† mem√≥ria*. Dependendo do contexto, entra no modo de planejamento ou de execu√ß√£o. Este comando continua servindo como gatilho principal para qualquer instru√ß√£o personalizada.

- üîß **initialize memory bank**  
  Executa a valida√ß√£o pr√©‚Äëvoo e cria um novo projeto se ele n√£o existir. Depois, cria a estrutura b√°sica de arquivos (`projectbrief.md`, `productContext.md`, etc.) e prepara o workspace para interagir com o MCP.

- üîÑ **update memory bank**  
  Gera uma atualiza√ß√£o de documenta√ß√£o quando h√° mudan√ßas significativas (‚â•25¬†% de impacto no c√≥digo), descoberta de padr√µes ou quando solicitado pelo usu√°rio. Antes de atualizar, l√™ novamente todos os arquivos de contexto para garantir consist√™ncia. Este comando tamb√©m deve ser usado ap√≥s criar/atualizar tarefas ou documentos via MCP para refletir o novo estado.

## Ferramentas MCP dispon√≠veis

O servidor MCP¬†Dart oferece recursos de gerenciamento de tarefas, documentos, espa√ßos e integra√ß√£o de ‚Äúdartboards‚Äù. Entre os principais, destacam‚Äëse:

- ‚úÖ **create_task** ‚Äì cria nova tarefa com t√≠tulo, descri√ß√£o, status, prioridade, tamanho, datas, dartboard, atribui√ß√µes, tags, propriedades personalizadas e relacionamentos„Äê893030205556183‚Ä†L195-L274„Äë.
- ‚úèÔ∏è **update_task** ‚Äì atualiza uma tarefa existente; permite modificar qualquer propriedade (t√≠tulo, descri√ß√£o, status, prioridade, datas, assignees, tags, propriedades personalizadas e relacionamentos)„Äê893030205556183‚Ä†L300-L381„Äë.
- üóëÔ∏è **delete_task** ‚Äì move uma tarefa existente para a lixeira sem alterar os demais campos„Äê893030205556183‚Ä†L385-L400„Äë.
- üìÑ **create_doc** ‚Äì cria um documento com t√≠tulo obrigat√≥rio e texto ou pasta opcionais„Äê893030205556183‚Ä†L531-L555„Äë.
- üìù **update_doc** ‚Äì atualiza documento existente; permite alterar t√≠tulo, conte√∫do e pasta„Äê893030205556183‚Ä†L576-L605„Äë.
- üìë **list_docs / list_tasks** ‚Äì lista documentos ou tarefas com filtros opcionais (por exemplo, pasta, status, prioridade, datas)„Äê893030205556183‚Ä†L531-L555„Äë„Äê893030205556183‚Ä†L195-L274„Äë.
- üì¶ **get_config** ‚Äì obt√©m metadados do espa√ßo do usu√°rio, incluindo listas de assignees, status, prioridades, tags e tipos„Äê893030205556183‚Ä†L195-L274„Äë. Deve ser chamado no in√≠cio para obter valores v√°lidos.

Essas ferramentas seguem o protocolo MCP e retornam respostas JSON estruturadas. As entradas aceitam strings, arrays ou n√∫meros conforme definido no *schema* do `tools.ts`„Äê893030205556183‚Ä†L195-L274„Äë. IDs de tarefas ou documentos s√£o cadeias alfanum√©ricas de 12¬†caracteres„Äê893030205556183‚Ä†L300-L331„Äë; utilize sempre o ID quando for referenciar um item existente.

## Ciclo de vida do banco de mem√≥ria

```mermaid
flowchart TD
    A[In√≠cio] --> B[Valida√ß√£o pr√©‚Äëvoo (*a*)]
    B --> C{Projeto existe?}
    C -->|Sim| D[Verificar arquivos principais]
    C -->|N√£o| E[Criar projeto] --> H[Criar arquivos ausentes]

    D --> F{Todos os arquivos presentes?}
    F -->|Sim| G[Accessar mem√≥ria (*f*)]
    F -->|N√£o| H

    H --> G
    G --> I[Modo de Planejamento (*b*)]
    G --> J[Modo de Execu√ß√£o (*c*)]

    I --> K[Listar projetos]
    K --> L[Selecionar contexto]
    L --> M[Desenvolver estrat√©gia]

    J --> N[Ler .cursor/rules]
    N --> O[Executar tarefa]
    O --> P[Atualizar documenta√ß√£o (*d*)]

    P --> Q{Atualiza√ß√£o necess√°ria?}
    Q -->|Novos padr√µes/mudan√ßas| R[Ler todos os arquivos]
    Q -->|Solicita√ß√£o do usu√°rio| R
    R --> S[Atualizar banco de mem√≥ria]

    S --> T[Processo de aprendizado (*e*)]
    T --> U[Identificar padr√µes]
    U --> V[Validar com usu√°rio]
    V --> W[Atualizar .cursor/rules]
    W --> X[Aplicar padr√µes]
    X --> O
```

## √çndice de fases e requisitos

### (a) Valida√ß√£o pr√©‚Äëvoo

üõ´ **Objetivo:** garantir que a estrutura local e a conex√£o com o MCP¬†Dart estejam prontas.  
Requisitos principais:

- Verificar se o diret√≥rio do projeto existe e cont√©m os arquivos b√°sicos (`projectbrief.md`, `productContext.md`, `systemPatterns.md`, `techContext.md`, `activeContext.md`, `progress.md`).  
- Conferir se h√° novos arquivos personalizados (ex.: `features/*.md`, `api/*.md`) e listar para refer√™ncia futura.  
- Confirmar que a vari√°vel de ambiente `DART_TOKEN` est√° configurada e que o servidor MCP est√° acess√≠vel. Utilize a ferramenta `get_config` para obter assignees, status, prioridades e outras op√ß√µes v√°lidas„Äê798144476205188‚Ä†L69-L100„Äë.

### (b) Modo de Planejamento

üìå **Entrada:** resultados de `list_directory` e leitura dos arquivos de contexto.  
üìå **Sa√≠da:** um plano estruturado registrado em `activeContext.md` descrevendo quais tarefas ou documentos ser√£o criados/atualizados e como isso se relaciona aos objetivos do projeto.

Antes de propor qualquer a√ß√£o, consulte o MCP para listar tarefas ou documentos existentes (`list_tasks` e `list_docs`) e analisar se √© necess√°rio criar novos itens ou apenas atualizar os existentes. Utilize os metadados retornados por `get_config` (assignees, status, prioridades etc.) para escolher valores v√°lidos. Certifique‚Äëse de documentar as decis√µes de planejamento, incluindo por que certas prioridades ou status foram escolhidos.

### (c) Modo de Execu√ß√£o

‚öôÔ∏è **Objetivo:** executar chamadas JSON ao MCP¬†Dart para criar ou atualizar tarefas e documentos, al√©m de atualizar os arquivos locais.  
Para cada opera√ß√£o, crie um objeto JSON contendo os campos exigidos pela ferramenta correspondente. Algumas diretrizes importantes:

- Campos obrigat√≥rios devem sempre ser fornecidos. Por exemplo, `create_task` requer `title`„Äê893030205556183‚Ä†L195-L274„Äë e `create_doc` requer `title`„Äê893030205556183‚Ä†L531-L555„Äë; `update_task` e `update_doc` sempre exigem `id`„Äê893030205556183‚Ä†L300-L381„Äë„Äê893030205556183‚Ä†L576-L605„Äë.
- Use `\n` para indicar quebras de linha dentro de strings; isso garante que o JSON seja v√°lido.  
- Mantenha as chaves em ordem l√≥gica: primeiro campos de identifica√ß√£o (`id`, `title`), depois atributos (`description`, `priority`, `status`), seguidos de arrays (`assignees`, `tags`) e objetos (`customProperties`, `taskRelationships`).  
- Utilize valores booleanos em min√∫sculo (`true`/`false`) e cite datas em formato ISO (por exemplo, `2025-05-10T09:00:00Z`)„Äê893030205556183‚Ä†L259-L270„Äë.
- Quando necess√°rio referenciar objetos existentes (tarefas, documentos, pastas), use sempre o *ID* de 12 caracteres„Äê893030205556183‚Ä†L300-L331„Äë„Äê893030205556183‚Ä†L584-L604„Äë; nunca inferir IDs sem consulta pr√©via.

**Exemplo de payload para `create_task`:**

```json
{
  "projectName": "nome-do-projeto",
  "fileName": "progress.md",
  "content": "{\n  \"title\": \"Implementar integra√ß√£o MCP\",\n  \"description\": \"Cria√ß√£o de tarefa para integra√ß√£o do MCP com sistema X.\",\n  \"priority\": \"High\",\n  \"status\": \"Open\",\n  \"assignees\": [\"tiago@example.com\"],\n  \"tags\": [\"MCP\", \"Integra√ß√£o\"]\n}\n"
}
```

Ap√≥s receber a resposta do MCP (que conter√° o ID gerado), registre a refer√™ncia no `progress.md` e no `activeContext.md`. Para atualiza√ß√µes, inclua apenas os campos que precisam ser modificados; campos ausentes permanecer√£o inalterados.

### (d) Atualiza√ß√µes de documenta√ß√£o

üìö **Quando atualizar:**

- Se a opera√ß√£o via MCP altera mais de 25¬†% do escopo do projeto (por exemplo, cria√ß√£o de diversos documentos ou tarefas relevantes).  
- Quando √© descoberto um padr√£o novo (por exemplo, uso recorrente de determinada prioridade ou tipo de tarefa).  
- Sempre que o usu√°rio emitir a instru√ß√£o **update memory bank**.  
- Em casos de ambiguidade de contexto (por exemplo, conflitos entre tarefas planejadas e o estado atual no MCP).

**Processo:** Antes de atualizar qualquer arquivo, releia todos os arquivos do banco de mem√≥ria para ter certeza de que a nova entrada n√£o causa incoer√™ncias. Em seguida, aplique as mudan√ßas no sentido inverso √† hierarquia: atualize primeiro `progress.md` com o status e IDs das tarefas/documentos criados, depois `activeContext.md`, e por √∫ltimo os arquivos contextuais.

### (e) Intelig√™ncia do projeto

üß† O arquivo `.cursor/rules` deve evoluir constantemente para capturar decis√µes e padr√µes espec√≠ficos do projeto. Isso inclui:

- Registrar caminhos cr√≠ticos de implementa√ß√£o (por exemplo, fluxos repetitivos de cria√ß√£o/atualiza√ß√£o de tarefas e documentos).  
- Documentar prefer√™ncias do usu√°rio quanto a prioridades, status e formato de documentos.  
- Acompanhar uso frequente de determinadas ferramentas (`create_task`, `update_task`, `create_doc`, etc.) e observar quais atributos s√£o mais utilizados.  
- Registrar decis√µes sobre relacionamento de tarefas (subtarefas, bloqueios e duplicatas) usando o esquema `taskRelationships`„Äê893030205556183‚Ä†L195-L274„Äë.

O ciclo de aprendizado consiste em validar essas observa√ß√µes com o usu√°rio, atualizar o `.cursor/rules` e aplicar os padr√µes nas futuras execu√ß√µes.

### (f) Estrutura do Memory¬†Bank

O banco de mem√≥ria mant√©m a mesma estrutura hier√°rquica do modelo original, pois facilita o racioc√≠nio incremental e a rastreabilidade:

```mermaid
flowchart TD
    PB[projectbrief.md\nRequisitos e metas principais] --> PC[productContext.md\nContexto do problema/solu√ß√µes]
    PB --> SP[systemPatterns.md\nArquitetura/padr√µes]
    PB --> TC[techContext.md\nStack tecnol√≥gico/configura√ß√£o]

    PC --> AC[activeContext.md\nFoco e decis√µes atuais]
    SP --> AC
    TC --> AC

    AC --> P[progress.md\nStatus e roteiro]

    %% Se√ß√£o de arquivos personalizados
    subgraph CF[Arquivos personalizados]
        CF1[features/*.md\nEspecifica√ß√µes de funcionalidades]
        CF2[api/*.md\nDocumenta√ß√£o de APIs]
        CF3[deployment/*.md\nGuias de deploy]
    end

    AC -.-> CF
    CF -.-> P

    style PB fill:#e066ff,stroke:#333,stroke-width:2px
    style AC fill:#4d94ff,stroke:#333,stroke-width:2px
    style P fill:#2eb82e,stroke:#333,stroke-width:2px
    style CF fill:#fff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5
    style CF1 fill:#fff,stroke:#333
    style CF2 fill:#fff,stroke:#333
    style CF3 fill:#fff,stroke:#333
```

üìÅ **Rela√ß√µes entre arquivos:**

- O `projectbrief.md` fornece requisitos e metas que alimentam todos os outros contextos.  
- Os arquivos de contexto (`productContext.md`, `systemPatterns.md`, `techContext.md`) informam as decis√µes registradas em `activeContext.md`.  
- O `progress.md` acompanha a implementa√ß√£o com base no contexto ativo, registrando IDs de tarefas e documentos criados via MCP.  
- Arquivos personalizados podem ser adicionados conforme necess√°rio (por exemplo, especifica√ß√µes de funcionalidades ou guias de integra√ß√£o de APIs). Estes devem seguir conven√ß√µes de nomenclatura e ser referenciados em `activeContext.md` quando criados.

üìñ **Padr√£o de acesso:**

- Sempre ler os arquivos na ordem hier√°rquica (from `projectbrief.md` down to custom files) antes de executar qualquer a√ß√£o; isso garante compreens√£o do contexto.  
- Ao atualizar, aplique mudan√ßas no sentido inverso (primeiro `progress.md`, depois `activeContext.md` e, por fim, os arquivos contextuais).  
- Consulte o `.cursor/rules` durante todo o processo para seguir as regras do projeto.  
- Integre novos arquivos personalizados ou campos de tarefas e documentos conforme as necessidades do projeto, mencionando‚Äëos explicitamente no `activeContext.md`.

---

Essas regras adaptadas permitem utilizar o servidor **MCP Dart** para criar, atualizar e organizar tarefas e documentos de forma coerente com o ciclo de vida do Memory Bank. A integra√ß√£o cuidadosa entre a estrutura de arquivos local e as opera√ß√µes remotas garante que o contexto seja preservado e que decis√µes sejam documentadas de maneira transparente.

## üìö **Refer√™ncias Adicionais**

Para detalhes espec√≠ficos sobre cria√ß√£o e gerenciamento de tasks via Dart CLI, consulte:
- `dart-cli-best-practices.mdc` - Melhores pr√°ticas detalhadas para comandos Dart CLI
- Sempre seguir as regras de cria√ß√£o de tasks com t√≠tulos descritivos e atualiza√ß√£o de progresso

# Memory Bank via MCP para Dart

üéØ **Objetivo geral**

Como engenheiro especialista cuja mem√≥ria se reinicia entre sess√µes, devo confiar **inteiramente** no *Memory¬†Bank* para recuperar contexto. Agora, em vez de utilizar apenas arquivos locais, o fluxo inclui a√ß√µes atrav√©s do servidor **MCP¬†Dart** para gerenciar tarefas e documentos. Antes de iniciar qualquer tarefa, devo ler **todos** os arquivos da mem√≥ria seguindo a hierarquia e validar que consigo comunicar‚Äëme com o MCP (por exemplo, chamando `get_config`). Os comandos a seguir controlam o ciclo de vida deste banco de mem√≥ria e as opera√ß√µes com Dart.

## Comandos‚Äëchave

- üß≠ **follow your custom instructions**  
  Inicia a *Valida√ß√£o pr√©‚Äëvoo* e, em seguida, segue o *padr√£o de acesso √† mem√≥ria*. Dependendo do contexto, entra no modo de planejamento ou de execu√ß√£o. Este comando continua servindo como gatilho principal para qualquer instru√ß√£o personalizada.

- üîß **initialize memory bank**  
  Executa a valida√ß√£o pr√©‚Äëvoo e cria um novo projeto se ele n√£o existir. Depois, cria a estrutura b√°sica de arquivos (`projectbrief.md`, `productContext.md`, etc.) e prepara o workspace para interagir com o MCP.

- üîÑ **update memory bank**  
  Gera uma atualiza√ß√£o de documenta√ß√£o quando h√° mudan√ßas significativas (‚â•25¬†% de impacto no c√≥digo), descoberta de padr√µes ou quando solicitado pelo usu√°rio. Antes de atualizar, l√™ novamente todos os arquivos de contexto para garantir consist√™ncia. Este comando tamb√©m deve ser usado ap√≥s criar/atualizar tarefas ou documentos via MCP para refletir o novo estado.

## Ferramentas MCP dispon√≠veis

O servidor MCP¬†Dart oferece recursos de gerenciamento de tarefas, documentos, espa√ßos e integra√ß√£o de ‚Äúdartboards‚Äù. Entre os principais, destacam‚Äëse:

- ‚úÖ **create_task** ‚Äì cria nova tarefa com t√≠tulo, descri√ß√£o, status, prioridade, tamanho, datas, dartboard, atribui√ß√µes, tags, propriedades personalizadas e relacionamentos„Äê893030205556183‚Ä†L195-L274„Äë.
- ‚úèÔ∏è **update_task** ‚Äì atualiza uma tarefa existente; permite modificar qualquer propriedade (t√≠tulo, descri√ß√£o, status, prioridade, datas, assignees, tags, propriedades personalizadas e relacionamentos)„Äê893030205556183‚Ä†L300-L381„Äë.
- üóëÔ∏è **delete_task** ‚Äì move uma tarefa existente para a lixeira sem alterar os demais campos„Äê893030205556183‚Ä†L385-L400„Äë.
- üìÑ **create_doc** ‚Äì cria um documento com t√≠tulo obrigat√≥rio e texto ou pasta opcionais„Äê893030205556183‚Ä†L531-L555„Äë.
- üìù **update_doc** ‚Äì atualiza documento existente; permite alterar t√≠tulo, conte√∫do e pasta„Äê893030205556183‚Ä†L576-L605„Äë.
- üìë **list_docs / list_tasks** ‚Äì lista documentos ou tarefas com filtros opcionais (por exemplo, pasta, status, prioridade, datas)„Äê893030205556183‚Ä†L531-L555„Äë„Äê893030205556183‚Ä†L195-L274„Äë.
- üì¶ **get_config** ‚Äì obt√©m metadados do espa√ßo do usu√°rio, incluindo listas de assignees, status, prioridades, tags e tipos„Äê893030205556183‚Ä†L195-L274„Äë. Deve ser chamado no in√≠cio para obter valores v√°lidos.

Essas ferramentas seguem o protocolo MCP e retornam respostas JSON estruturadas. As entradas aceitam strings, arrays ou n√∫meros conforme definido no *schema* do `tools.ts`„Äê893030205556183‚Ä†L195-L274„Äë. IDs de tarefas ou documentos s√£o cadeias alfanum√©ricas de 12¬†caracteres„Äê893030205556183‚Ä†L300-L331„Äë; utilize sempre o ID quando for referenciar um item existente.

## Ciclo de vida do banco de mem√≥ria

```mermaid
flowchart TD
    A[In√≠cio] --> B[Valida√ß√£o pr√©‚Äëvoo (*a*)]
    B --> C{Projeto existe?}
    C -->|Sim| D[Verificar arquivos principais]
    C -->|N√£o| E[Criar projeto] --> H[Criar arquivos ausentes]

    D --> F{Todos os arquivos presentes?}
    F -->|Sim| G[Accessar mem√≥ria (*f*)]
    F -->|N√£o| H

    H --> G
    G --> I[Modo de Planejamento (*b*)]
    G --> J[Modo de Execu√ß√£o (*c*)]

    I --> K[Listar projetos]
    K --> L[Selecionar contexto]
    L --> M[Desenvolver estrat√©gia]

    J --> N[Ler .cursor/rules]
    N --> O[Executar tarefa]
    O --> P[Atualizar documenta√ß√£o (*d*)]

    P --> Q{Atualiza√ß√£o necess√°ria?}
    Q -->|Novos padr√µes/mudan√ßas| R[Ler todos os arquivos]
    Q -->|Solicita√ß√£o do usu√°rio| R
    R --> S[Atualizar banco de mem√≥ria]

    S --> T[Processo de aprendizado (*e*)]
    T --> U[Identificar padr√µes]
    U --> V[Validar com usu√°rio]
    V --> W[Atualizar .cursor/rules]
    W --> X[Aplicar padr√µes]
    X --> O
```

## √çndice de fases e requisitos

### (a) Valida√ß√£o pr√©‚Äëvoo

üõ´ **Objetivo:** garantir que a estrutura local e a conex√£o com o MCP¬†Dart estejam prontas.  
Requisitos principais:

- Verificar se o diret√≥rio do projeto existe e cont√©m os arquivos b√°sicos (`projectbrief.md`, `productContext.md`, `systemPatterns.md`, `techContext.md`, `activeContext.md`, `progress.md`).  
- Conferir se h√° novos arquivos personalizados (ex.: `features/*.md`, `api/*.md`) e listar para refer√™ncia futura.  
- Confirmar que a vari√°vel de ambiente `DART_TOKEN` est√° configurada e que o servidor MCP est√° acess√≠vel. Utilize a ferramenta `get_config` para obter assignees, status, prioridades e outras op√ß√µes v√°lidas„Äê798144476205188‚Ä†L69-L100„Äë.

### (b) Modo de Planejamento

üìå **Entrada:** resultados de `list_directory` e leitura dos arquivos de contexto.  
üìå **Sa√≠da:** um plano estruturado registrado em `activeContext.md` descrevendo quais tarefas ou documentos ser√£o criados/atualizados e como isso se relaciona aos objetivos do projeto.

Antes de propor qualquer a√ß√£o, consulte o MCP para listar tarefas ou documentos existentes (`list_tasks` e `list_docs`) e analisar se √© necess√°rio criar novos itens ou apenas atualizar os existentes. Utilize os metadados retornados por `get_config` (assignees, status, prioridades etc.) para escolher valores v√°lidos. Certifique‚Äëse de documentar as decis√µes de planejamento, incluindo por que certas prioridades ou status foram escolhidos.

### (c) Modo de Execu√ß√£o

‚öôÔ∏è **Objetivo:** executar chamadas JSON ao MCP¬†Dart para criar ou atualizar tarefas e documentos, al√©m de atualizar os arquivos locais.  
Para cada opera√ß√£o, crie um objeto JSON contendo os campos exigidos pela ferramenta correspondente. Algumas diretrizes importantes:

- Campos obrigat√≥rios devem sempre ser fornecidos. Por exemplo, `create_task` requer `title`„Äê893030205556183‚Ä†L195-L274„Äë e `create_doc` requer `title`„Äê893030205556183‚Ä†L531-L555„Äë; `update_task` e `update_doc` sempre exigem `id`„Äê893030205556183‚Ä†L300-L381„Äë„Äê893030205556183‚Ä†L576-L605„Äë.
- Use `\n` para indicar quebras de linha dentro de strings; isso garante que o JSON seja v√°lido.  
- Mantenha as chaves em ordem l√≥gica: primeiro campos de identifica√ß√£o (`id`, `title`), depois atributos (`description`, `priority`, `status`), seguidos de arrays (`assignees`, `tags`) e objetos (`customProperties`, `taskRelationships`).  
- Utilize valores booleanos em min√∫sculo (`true`/`false`) e cite datas em formato ISO (por exemplo, `2025-05-10T09:00:00Z`)„Äê893030205556183‚Ä†L259-L270„Äë.
- Quando necess√°rio referenciar objetos existentes (tarefas, documentos, pastas), use sempre o *ID* de 12 caracteres„Äê893030205556183‚Ä†L300-L331„Äë„Äê893030205556183‚Ä†L584-L604„Äë; nunca inferir IDs sem consulta pr√©via.

**Exemplo de payload para `create_task`:**

```json
{
  "projectName": "nome-do-projeto",
  "fileName": "progress.md",
  "content": "{\n  \"title\": \"Implementar integra√ß√£o MCP\",\n  \"description\": \"Cria√ß√£o de tarefa para integra√ß√£o do MCP com sistema X.\",\n  \"priority\": \"High\",\n  \"status\": \"Open\",\n  \"assignees\": [\"tiago@example.com\"],\n  \"tags\": [\"MCP\", \"Integra√ß√£o\"]\n}\n"
}
```

Ap√≥s receber a resposta do MCP (que conter√° o ID gerado), registre a refer√™ncia no `progress.md` e no `activeContext.md`. Para atualiza√ß√µes, inclua apenas os campos que precisam ser modificados; campos ausentes permanecer√£o inalterados.

### (d) Atualiza√ß√µes de documenta√ß√£o

üìö **Quando atualizar:**

- Se a opera√ß√£o via MCP altera mais de 25¬†% do escopo do projeto (por exemplo, cria√ß√£o de diversos documentos ou tarefas relevantes).  
- Quando √© descoberto um padr√£o novo (por exemplo, uso recorrente de determinada prioridade ou tipo de tarefa).  
- Sempre que o usu√°rio emitir a instru√ß√£o **update memory bank**.  
- Em casos de ambiguidade de contexto (por exemplo, conflitos entre tarefas planejadas e o estado atual no MCP).

**Processo:** Antes de atualizar qualquer arquivo, releia todos os arquivos do banco de mem√≥ria para ter certeza de que a nova entrada n√£o causa incoer√™ncias. Em seguida, aplique as mudan√ßas no sentido inverso √† hierarquia: atualize primeiro `progress.md` com o status e IDs das tarefas/documentos criados, depois `activeContext.md`, e por √∫ltimo os arquivos contextuais.

### (e) Intelig√™ncia do projeto

üß† O arquivo `.cursor/rules` deve evoluir constantemente para capturar decis√µes e padr√µes espec√≠ficos do projeto. Isso inclui:

- Registrar caminhos cr√≠ticos de implementa√ß√£o (por exemplo, fluxos repetitivos de cria√ß√£o/atualiza√ß√£o de tarefas e documentos).  
- Documentar prefer√™ncias do usu√°rio quanto a prioridades, status e formato de documentos.  
- Acompanhar uso frequente de determinadas ferramentas (`create_task`, `update_task`, `create_doc`, etc.) e observar quais atributos s√£o mais utilizados.  
- Registrar decis√µes sobre relacionamento de tarefas (subtarefas, bloqueios e duplicatas) usando o esquema `taskRelationships`„Äê893030205556183‚Ä†L195-L274„Äë.

O ciclo de aprendizado consiste em validar essas observa√ß√µes com o usu√°rio, atualizar o `.cursor/rules` e aplicar os padr√µes nas futuras execu√ß√µes.

### (f) Estrutura do Memory¬†Bank

O banco de mem√≥ria mant√©m a mesma estrutura hier√°rquica do modelo original, pois facilita o racioc√≠nio incremental e a rastreabilidade:

```mermaid
flowchart TD
    PB[projectbrief.md\nRequisitos e metas principais] --> PC[productContext.md\nContexto do problema/solu√ß√µes]
    PB --> SP[systemPatterns.md\nArquitetura/padr√µes]
    PB --> TC[techContext.md\nStack tecnol√≥gico/configura√ß√£o]

    PC --> AC[activeContext.md\nFoco e decis√µes atuais]
    SP --> AC
    TC --> AC

    AC --> P[progress.md\nStatus e roteiro]

    %% Se√ß√£o de arquivos personalizados
    subgraph CF[Arquivos personalizados]
        CF1[features/*.md\nEspecifica√ß√µes de funcionalidades]
        CF2[api/*.md\nDocumenta√ß√£o de APIs]
        CF3[deployment/*.md\nGuias de deploy]
    end

    AC -.-> CF
    CF -.-> P

    style PB fill:#e066ff,stroke:#333,stroke-width:2px
    style AC fill:#4d94ff,stroke:#333,stroke-width:2px
    style P fill:#2eb82e,stroke:#333,stroke-width:2px
    style CF fill:#fff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5
    style CF1 fill:#fff,stroke:#333
    style CF2 fill:#fff,stroke:#333
    style CF3 fill:#fff,stroke:#333
```

üìÅ **Rela√ß√µes entre arquivos:**

- O `projectbrief.md` fornece requisitos e metas que alimentam todos os outros contextos.  
- Os arquivos de contexto (`productContext.md`, `systemPatterns.md`, `techContext.md`) informam as decis√µes registradas em `activeContext.md`.  
- O `progress.md` acompanha a implementa√ß√£o com base no contexto ativo, registrando IDs de tarefas e documentos criados via MCP.  
- Arquivos personalizados podem ser adicionados conforme necess√°rio (por exemplo, especifica√ß√µes de funcionalidades ou guias de integra√ß√£o de APIs). Estes devem seguir conven√ß√µes de nomenclatura e ser referenciados em `activeContext.md` quando criados.

üìñ **Padr√£o de acesso:**

- Sempre ler os arquivos na ordem hier√°rquica (from `projectbrief.md` down to custom files) antes de executar qualquer a√ß√£o; isso garante compreens√£o do contexto.  
- Ao atualizar, aplique mudan√ßas no sentido inverso (primeiro `progress.md`, depois `activeContext.md` e, por fim, os arquivos contextuais).  
- Consulte o `.cursor/rules` durante todo o processo para seguir as regras do projeto.  
- Integre novos arquivos personalizados ou campos de tarefas e documentos conforme as necessidades do projeto, mencionando‚Äëos explicitamente no `activeContext.md`.

---

Essas regras adaptadas permitem utilizar o servidor **MCP¬†Dart** para criar, atualizar e organizar tarefas e documentos de forma coerente com o ciclo de vida do Memory¬†Bank. A integra√ß√£o cuidadosa entre a estrutura de arquivos local e as opera√ß√µes remotas garante que o contexto seja preservado e que decis√µes sejam documentadas de maneira transparente.